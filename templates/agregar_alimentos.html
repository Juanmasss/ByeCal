<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ByeCal ‚Äî Alimentos consumidos</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='ByeCal.ico') }}">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <div class="container alimentos-consumidos" style="max-width: 1100px; margin: 40px auto; font-family: 'Nunito', sans-serif;">
    <header class="page-header" style="margin-bottom: 16px;">
      <h1 style="margin: 0 0 6px;">Alimentos consumidos</h1>
      <p class="subtitle" style="margin: 0; opacity: .8;">Aqu√≠ ver√°s los alimentos que registres durante el d√≠a.</p>
    </header>

    <!-- üî• Bloque de calor√≠as -->
    <div class="card" style="background:#fff; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.08); padding: 16px; margin-bottom:16px;">
      <h2 style="margin-top:0;">Calor√≠as</h2>
      <p><strong>Recomendadas:</strong> {{ calorias_recomendadas }} kcal</p>
      <p><strong>Consumidas:</strong> <span id="consumidas">{{ calorias_consumidas }}</span> kcal</p>
    </div>

    <!-- üî• Tabla de alimentos consumidos -->
    <div class="card" style="background:#fff; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.08); padding: 16px;">
      <div class="table-responsive" style="overflow-x:auto;">
        <table class="tabla-consumos" style="width:100%; border-collapse:collapse; min-width:760px;">
          <thead>
            <tr>
              <th>#</th>
              <th>Fecha</th>
              <th>Alimento</th>
              <th>Porci√≥n</th>
              <th>Calor√≠as (kcal)</th>
              <th>Prote√≠nas (g)</th>
              <th>Carbohidratos (g)</th>
              <th>Grasas (g)</th>
              <th>Acciones</th> <!-- Nueva columna -->
            </tr>
          </thead>
          <tbody>
            {% if consumos and consumos|length > 0 %}
                {% for c in consumos %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ c.fecha_hora.strftime('%Y-%m-%d %H:%M') if c.fecha_hora else '-' }}</td>
                  <td>{{ c.nombre }}</td>
                  <td>{{ c.porcion or '-' }}</td>
                  <td>{{ (c.calorias or 0)|round(0) }}</td>
                  <td>{{ (c.proteinas or 0)|round(1) }}</td>
                  <td>{{ (c.carbohidratos or 0)|round(1) }}</td>
                  <td>{{ (c.grasas or 0)|round(1) }}</td>
                  <td>
                    <form method="POST" action="{{ url_for('eliminar_consumo', consumo_id=c.id) }}" style="display:inline;">
                      <button type="submit" style="background:#e53935; color:#fff; border:none; padding:6px 10px; border-radius:6px; cursor:pointer;">
                        ‚ùå Eliminar
                      </button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                  <td colspan="9" class="empty" style="padding:14px; text-align:center; opacity:.7;">
                    No hay registros a√∫n.
                  </td>
                </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- üî• Botones de navegaci√≥n -->
    <div style="margin-top: 24px; text-align:center;">
      <a href="{{ url_for('alimentos') }}" 
         style="display:inline-block; margin:8px; padding:10px 18px; background:#2196F3; color:#fff; text-decoration:none; border-radius:8px;">
         ‚¨Ö Volver a alimentos
      </a>
      <a href="{{ url_for('dashboard') }}" 
         style="display:inline-block; margin:8px; padding:10px 18px; background:#4CAF50; color:#fff; text-decoration:none; border-radius:8px;">
         üè† Volver al inicio
      </a>
    </div>

  </div>
</body>
</html>